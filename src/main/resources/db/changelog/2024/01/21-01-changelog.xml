<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.24.xsd"        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
<changeSet id="1705871274486-1" author="HP (generated)">
<createTable tableName="actor">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_actor"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="date_of_birth" type="DATE"/>
            <column name="nationality" type="VARCHAR(255)"/>
            <column name="bio" type="VARCHAR(255)"/>
        </createTable>
</changeSet>
<changeSet id="1705871274486-2" author="HP (generated)">
<createTable tableName="category">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_category"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
</changeSet>
<changeSet id="1705871274486-3" author="HP (generated)">
<createTable tableName="episode">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_episode"/>
            </column>
            <column name="duration" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="season" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="serie_id" type="BIGINT"/>
        </createTable>
</changeSet>
<changeSet id="1705871274486-4" author="HP (generated)">
<createTable tableName="movie">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_movie"/>
            </column>
            <column name="dtype" type="VARCHAR(31)"/>
            <column name="title" type="VARCHAR(255)"/>
            <column name="description" type="VARCHAR(255)"/>
            <column name="nationality" type="VARCHAR(255)"/>
            <column name="release_date" type="DATE"/>
            <column name="number_of_seasons" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
</changeSet>
<changeSet id="1705871274486-5" author="HP (generated)">
<createTable tableName="movie_category">
            <column name="category_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_movie_category"/>
            </column>
            <column name="movie_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_movie_category"/>
            </column>
        </createTable>
</changeSet>
<changeSet id="1705871274486-6" author="HP (generated)">
<createTable tableName="review">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_review"/>
            </column>
            <column name="review_text" type="VARCHAR(255)"/>
            <column name="rating" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="BIGINT"/>
            <column name="movie_id" type="BIGINT"/>
        </createTable>
</changeSet>
<changeSet id="1705871274486-7" author="HP (generated)">
<createTable tableName="role">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_role"/>
            </column>
            <column name="role_name" type="VARCHAR(255)"/>
            <column name="actor_id" type="BIGINT"/>
            <column name="movie_id" type="BIGINT"/>
        </createTable>
</changeSet>
<changeSet id="1705871274486-8" author="HP (generated)">
<createTable tableName="user">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_user"/>
            </column>
            <column name="username" type="VARCHAR(255)"/>
        </createTable>
</changeSet>
<changeSet id="1705871274486-9" author="HP (generated)">
<createTable tableName="user_favorite">
            <column name="show_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_user_favorite"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_user_favorite"/>
            </column>
        </createTable>
</changeSet>
<changeSet id="1705871274486-10" author="HP (generated)">
<addForeignKeyConstraint baseColumnNames="serie_id" baseTableName="episode" constraintName="FK_EPISODE_ON_SERIE" referencedColumnNames="id" referencedTableName="movie"/>
</changeSet>
<changeSet id="1705871274486-11" author="HP (generated)">
<addForeignKeyConstraint baseColumnNames="movie_id" baseTableName="review" constraintName="FK_REVIEW_ON_MOVIE" referencedColumnNames="id" referencedTableName="movie"/>
</changeSet>
<changeSet id="1705871274486-12" author="HP (generated)">
<addForeignKeyConstraint baseColumnNames="user_id" baseTableName="review" constraintName="FK_REVIEW_ON_USER" referencedColumnNames="id" referencedTableName="user"/>
</changeSet>
<changeSet id="1705871274486-13" author="HP (generated)">
<addForeignKeyConstraint baseColumnNames="actor_id" baseTableName="role" constraintName="FK_ROLE_ON_ACTOR" referencedColumnNames="id" referencedTableName="actor"/>
</changeSet>
<changeSet id="1705871274486-14" author="HP (generated)">
<addForeignKeyConstraint baseColumnNames="movie_id" baseTableName="role" constraintName="FK_ROLE_ON_MOVIE" referencedColumnNames="id" referencedTableName="movie"/>
</changeSet>
<changeSet id="1705871274486-15" author="HP (generated)">
<addForeignKeyConstraint baseColumnNames="category_id" baseTableName="movie_category" constraintName="fk_movcat_on_category" referencedColumnNames="id" referencedTableName="category"/>
</changeSet>
<changeSet id="1705871274486-16" author="HP (generated)">
<addForeignKeyConstraint baseColumnNames="movie_id" baseTableName="movie_category" constraintName="fk_movcat_on_movie" referencedColumnNames="id" referencedTableName="movie"/>
</changeSet>
<changeSet id="1705871274486-17" author="HP (generated)">
<addForeignKeyConstraint baseColumnNames="show_id" baseTableName="user_favorite" constraintName="fk_usefav_on_movie" referencedColumnNames="id" referencedTableName="movie"/>
</changeSet>
<changeSet id="1705871274486-18" author="HP (generated)">
<addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_favorite" constraintName="fk_usefav_on_user" referencedColumnNames="id" referencedTableName="user"/>
</changeSet>

</databaseChangeLog>